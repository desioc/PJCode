aW1wb3J0IGphdmEuaW8uKjsKaW1wb3J0IGphdmEudXRpbC4qOwppbXBvcnQgamF2YS5uaW8uZmls
ZS4qOwppbXBvcnQgamF2YS5uaW8uKjsKaW1wb3J0IGphdmEudXRpbC5zdHJlYW0uKjsKCnB1Ymxp
YyBjbGFzcyBUZXN0QmFzZTY0IHsKICAgIHByaXZhdGUgc3RhdGljIGZpbmFsIFN0cmluZyBGSUxF
ID0gInBlcnNvbmEuYmFzZTY0IjsKICAgIHB1YmxpYyBzdGF0aWMgdm9pZCBtYWluKFN0cmluZyBh
cmdzW10pIHRocm93cyBJT0V4Y2VwdGlvbiB7CiAgICAgICAgQmFzZTY0LkVuY29kZXIgZW5jb2Rl
ciA9IEJhc2U2NC5nZXRNaW1lRW5jb2RlcigpOwogICAgICAgICBQZXJzb25hIHAgPSBuZXcgUGVy
c29uYSAoIlNlcmdlaiIsICJSYWNobWFuaW5vdiIsICJ4eHgiKTsKICAgICAgICB0cnkgKEZpbGVP
dXRwdXRTdHJlYW0gZiA9IAogICAgICAgICAgICAgICBuZXcgRmlsZU91dHB1dFN0cmVhbSAobmV3
IEZpbGUoRklMRSkpOwogICAgICAgICAgICAgT2JqZWN0T3V0cHV0U3RyZWFtIHMgPSBuZXcgT2Jq
ZWN0T3V0cHV0U3RyZWFtIChmKTspIHsKICAgICAgICAgICAgT3V0cHV0U3RyZWFtIG9zID0gZW5j
b2Rlci53cmFwKHMpOwogICAgICAgICAgICBPYmplY3RPdXRwdXRTdHJlYW0gb29zID0gbmV3IE9i
amVjdE91dHB1dFN0cmVhbShvcyk7CiAgICAgICAgICAgIG9vcy53cml0ZU9iamVjdCAocCk7CiAg
ICAgICAgICAgIFN5c3RlbS5vdXQucHJpbnRsbigiT2dnZXR0byBzZXJpYWxpenphdG86ICIgKyBw
KTsKICAgICAgICB9IAogICAgICAgIAogICAgICAgIFBhdGggb3JpZ2luYWxQYXRoID0gUGF0aHMu
Z2V0KCJUZXN0QmFzZTY0LmphdmEiKSwKICAgICAgICBlbmNvZGVkUGF0aCA9IFBhdGhzLmdldCgi
QmFzZTY0RGVtby5qYXZhLmJhc2U2NCIpOwogICAgICAgIGVuY29kZXIgPSBCYXNlNjQuZ2V0TWlt
ZUVuY29kZXIoKTsKICAgICAgICB0cnkgKE91dHB1dFN0cmVhbSBvdXRwdXQgPSBGaWxlcy5uZXdP
dXRwdXRTdHJlYW0oZW5jb2RlZFBhdGgpKSB7CiAgICAgICAgICAgIEZpbGVzLmNvcHkob3JpZ2lu
YWxQYXRoLCBlbmNvZGVyLndyYXAob3V0cHV0KSk7CiAgICAgICAgfQogICAgICAgIFBhdGggZGVj
b2RlZFBhdGggPSBQYXRocy5nZXQoIkJhc2U2NERlbW8uamF2YS5kZWNvZGVkIik7CiAgICAgICAg
QmFzZTY0LkRlY29kZXIgZGVjb2RlciA9IEJhc2U2NC5nZXRNaW1lRGVjb2RlcigpOwogICAgICAg
IHRyeSAoSW5wdXRTdHJlYW0gaW5wdXQgPSBGaWxlcy5uZXdJbnB1dFN0cmVhbShlbmNvZGVkUGF0
aCkpIHsKICAgICAgICAgICAgRmlsZXMuY29weShkZWNvZGVyLndyYXAoaW5wdXQpLCBkZWNvZGVk
UGF0aCk7CiAgICAgICAgfQogICAgfQp9